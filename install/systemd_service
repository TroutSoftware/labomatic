[Unit]
Description=Automated lab creation solution
Documentation=man:labd(8)

[Service]
Type=dbus
BusName=software.trout.labomatic
ExecStart=/usr/lib/labomatic/labd
NotifyAccess=main
Restart=on-failure
CapabilityBoundingSet=CAP_NET_ADMIN

# Filesystem lockdown
ProtectSystem=strict
ProtectHome=read-only
PrivateTmp=true
ProtectKernelTunables=true
ProtectControlGroups=true

# Execute Mappings
MemoryDenyWriteExecute=true

# Privilege escalation
NoNewPrivileges=true

# Real-time
RestrictRealtime=true

[Install]
WantedBy=multi-user.target
Alias=dbus-software.trout.labomatic.service